<section class="section">
  <div class="container">
    <div class="form-container">
      <p class="title has-text-centered is-4">What Services are you looking for</p>
      <%= form_for @request do |f| %>
        <div class="field">
          <label class="label">Title (*)</label>
          <%= f.text_field :title, placeholder: "I request...", class: "input" %>
        </div>

        <div class="field">
          <label class="label">Description (*)</label>
          <%= f.text_area :description, placeholder: "I'm looking for...", class: "textarea" %>
        </div>

        <div class="field">
          <label class="label">Choose a Category</label>
          <div class=" select is-fullwidth">
            <%= f.select :category_id, options_for_select(@categories.map { |c| [c.name, c.id]}), class: "" %>
          </div>
        </div>

        <div class="field">
          <label class="label">Delivery</label>
          <%= f.number_field :delivery, placeholder: "1-30 days", class: "input" %>
        </div>

        <div class="field">
          <label class="label">Budget</label>
          <%= f.number_field :budget, placeholder: "$5 minimum", class: "input" %>
        </div>

        <div class="field">
          <label class="label">Upload attachement(Optional)</label>
          <div class="file is-warning has-name">
            <label class="file-label">
              <%= f.file_field :file, class: "file-input" %>
              <span class="file-cta"><span class="file-label">Choose a file </span></span>
              <span class="file-name" id="file-name">No file selected</span>
            </label>
          </div>
        </div>

        <div class="field has-text-centered">
          <%= f.submit "Post request", class: "button is-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</section>


<script>
  $(document).ready(function() {
    var file = $(".file-input");
    console.log(file);
    file.change(function() {
      if (file[0].files.length > 0) {
        var attachement = file[0].files[0];
        $("#file-name").text(attachement.name + " (" + attachement.size + " bytes)");
      }
    })
  })
</script>